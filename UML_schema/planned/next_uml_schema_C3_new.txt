@startuml

actor User as Client
actor Admin as Admin
actor Analyst as Analyst


package "UGC Layer" {
  [FastAPI2] <--> [Kafka]: UGC data
  [Kafka] <--> [ClickHouse]
  [FastAPI2] <--> [Redis cluster] : last timestamp

  package "Redis cluster" {
  [Redis_MS] <--> [Redis_SL] : sync
  }

}

note right of Redis_MS
  A Redis cluster is a distributed implementation of Redis,
  providing high availability and scalability.
end note

note right of FastAPI2
  API service, to /create, /read and store data in different
  locations
end note

[Client] <--> [Main Service]: API requests
[Admin] <--> [Main Service]: Web interface
[Analyst] <--> [UGC Layer]: view/edit statistic
[Client] --> [UGC Layer]: save UGC data

@enduml
